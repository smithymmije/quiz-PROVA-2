<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quiz Gest√£o de Processos</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background-color: #0A0F19;
        color: white;
        text-align: center;
        padding: 20px;
        margin: 0;
    }
    h1 {
        color: #FFD700;
        font-size: 2rem;
        margin-bottom: 10px;
    }
    h2 {
        font-size: 1.4rem;
        color: #1E90FF;
    }
    .btn-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 10px;
        margin-bottom: 20px;
    }
    .btn {
        background-color: #1E90FF;
        color: white;
        border: none;
        padding: 10px 20px;
        cursor: pointer;
        font-size: 1rem;
        border-radius: 8px;
        transition: background-color 0.3s;
        flex-grow: 1;
        min-width: 150px;
    }
    .btn:hover {
        background-color: #4682B4;
    }
    .option {
        background-color: #222;
        border: 2px solid #444;
        padding: 12px;
        margin: 10px auto;
        border-radius: 8px;
        cursor: pointer;
        user-select: none;
        transition: background-color 0.3s, transform 0.2s;
        max-width: 600px;
        font-size: 1rem;
        text-align: left;
    }
    .option:hover {
        background-color: #333;
    }
    .correct {
        background-color: #28a745 !important;
        border-color: #28a745 !important;
        color: white;
        animation: pulse-correct 0.5s ease;
    }
    .wrong {
        background-color: #dc3545 !important;
        border-color: #dc3545 !important;
        color: white;
        animation: shake-wrong 0.5s ease;
    }
    @keyframes pulse-correct {
        0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); }
    }
    @keyframes shake-wrong {
        0% { transform: translateX(0); } 25% { transform: translateX(-5px); } 50% { transform: translateX(5px); } 75% { transform: translateX(-5px); } 100% { transform: translateX(0); }
    }
    .explanation {
        display: block; font-size: 0.9rem; margin-top: 10px; font-style: italic; max-width: 600px; margin-left: auto; margin-right: auto; text-align: left;
    }
    #feedback {
        font-weight:bold; margin-top: 15px;
    }
    #feedback strong {
        color: #FFD700;
    }
    .input-field, .textarea-field {
        width: 100%; max-width: 600px; padding: 10px; margin-top: 15px; border-radius: 5px; border: 1px solid #555; background-color: #333; color: white; font-size: 1rem;
    }
    .textarea-field {
        min-height: 80px; resize: vertical;
    }
    .match-container {
        display: grid; grid-template-columns: 1fr; gap: 10px; align-items: center; max-width: 600px; margin: 20px auto; text-align: left;
    }
    .match-container input {
        width: 40px; text-align: center; font-size: 1rem; padding: 5px;
    }
    .match-options {
        grid-column: span 1; border: 1px dashed #444; padding: 10px; border-radius: 8px;
    }
    .nav-buttons {
        margin-top: 20px;
    }

    #gabarito {
        white-space: pre-wrap; text-align: left; max-width: 600px; margin: 20px auto; background-color: #111; padding: 15px; border-radius: 8px;
    }
</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>

<h1>üéØ Quiz de Gest√£o de Processos</h1>

<div id="menu">
    <p>Escolha uma categoria para come√ßar:</p>
    <div class="btn-container">
        <button class="btn" onclick="startQuiz('conceitos')">Conceitos B√°sicos (1-10)</button>
        <button class="btn" onclick="startQuiz('vf')">Verdadeiro/Falso (11-20)</button>
        <button class="btn" onclick="startQuiz('associacao')">Associa√ß√£o (21-30)</button>
        <button class="btn" onclick="startQuiz('calculos')">C√°lculos (31-40)</button>
        <button class="btn" onclick="startQuiz('graficos')">Interp. Gr√°ficos (41-50)</button>
        <button class="btn" onclick="startQuiz('abertas')">Quest√µes Abertas (51-60)</button>
        <button class="btn" onclick="startQuiz('aleatorio')">Aleat√≥rio (10 Quest√µes)</button>
    </div>
</div>


<div id="quiz" style="display:none; margin-top: 20px;">
    <h2 id="question"></h2>
    <div id="question-body"></div>
    <div class="nav-buttons" id="nav-buttons"></div>
    <p id="feedback"></p>
    <span id="explanation" class="explanation"></span>
</div>

<div id="result" style="display:none; margin-top: 20px;">
    <h2>üèÜ Resultado Final</h2>
    <p id="final-message"></p>
    <p id="score" style="font-size: 1.2rem; font-weight: bold;"></p>
    <div id="gabarito"></div>
    <div class="btn-container" style="margin-top:20px;">
        <button class="btn" onclick="voltarInicio()">Voltar ao In√≠cio</button>
        <button class="btn" onclick="baixarRelatorio()">Baixar Relat√≥rio PDF</button>
    </div>
</div>

<script>
// Objeto com todas as perguntas
const allQuestions = {
    conceitos: [
        { tipo: "mcq", pergunta: "1. O que √© um processo?", opcoes: ["Apenas uma etapa de produ√ß√£o", "Um conjunto de atividades que transforma entradas em sa√≠das", "Um documento de qualidade", "Uma m√°quina industrial"], resposta: "b", explicacao: "Um processo √© uma sequ√™ncia de atividades inter-relacionadas que transformam insumos (entradas) em produtos ou servi√ßos (sa√≠das) com valor agregado." },
        { tipo: "mcq", pergunta: "2. Qual √© a principal fun√ß√£o do mapeamento de processos?", opcoes: ["Decorar a f√°brica", "Visualizar e melhorar o fluxo de trabalho", "Aumentar o n√∫mero de funcion√°rios", "Diminuir o sal√°rio da equipe"], resposta: "b", explicacao: "O mapeamento de processos cria uma representa√ß√£o visual do fluxo de trabalho, permitindo identificar inefici√™ncias, gargalos e oportunidades de melhoria." },
        { tipo: "mcq", pergunta: "3. Em qual tipo de produ√ß√£o cada produto √© √∫nico?", opcoes: ["Massa", "Projeto", "Lote", "Cont√≠nua"], resposta: "b", explicacao: "A produ√ß√£o por projeto lida com produtos √∫nicos e complexos, como a constru√ß√£o de um navio ou um software personalizado, onde cada item tem especifica√ß√µes exclusivas." },
        { tipo: "mcq", pergunta: "4. O que √© Lead Time?", opcoes: ["Tempo de montagem", "Tempo total desde a entrada at√© a sa√≠da do processo", "Tempo de folga do funcion√°rio", "Tempo de manuten√ß√£o"], resposta: "b", explicacao: "Lead Time √© o tempo total que um item (ou cliente) leva para percorrer todo o processo, desde o pedido inicial at√© a entrega final, incluindo esperas." },
        { tipo: "mcq", pergunta: "5. Qual √© a fun√ß√£o do SIPOC?", opcoes: ["Calcular custos", "Definir fornecedores, entradas, processo, sa√≠das e clientes", "Escolher fornecedores", "Criar logotipos"], resposta: "b", explicacao: "SIPOC (Supplier, Input, Process, Output, Customer) √© uma ferramenta de mapeamento de alto n√≠vel que resume um processo, identificando seus elementos-chave." },
        { tipo: "mcq", pergunta: "6. O que √© Takt Time?", opcoes: ["Tempo que o cliente leva para decidir", "Ritmo de produ√ß√£o necess√°rio para atender a demanda", "Tempo de manuten√ß√£o das m√°quinas", "Tempo de descanso"], resposta: "b", explicacao: "Takt Time sincroniza a produ√ß√£o com a demanda do cliente. √â calculado dividindo o tempo de produ√ß√£o dispon√≠vel pela demanda do cliente." },
        { tipo: "mcq", pergunta: "7. Qual √© um exemplo de servi√ßo de massa?", opcoes: ["Cirurgia pl√°stica", "Call center de banco", "Consultoria jur√≠dica", "Restaurante de luxo"], resposta: "b", explicacao: "Servi√ßos em massa, como um call center, lidam com alto volume de clientes e processos padronizados, com pouca customiza√ß√£o." },
        { tipo: "mcq", pergunta: "8. Qual √© um exemplo de arranjo f√≠sico posicional?", opcoes: ["Linha de montagem", "Cirurgia de cora√ß√£o", "Supermercado", "F√°brica de refrigerantes"], resposta: "b", explicacao: "No arranjo f√≠sico posicional (ou fixo), o produto/cliente permanece parado, e os recursos (m√©dicos, equipamentos) se movem at√© ele, como em uma cirurgia complexa." },
        { tipo: "mcq", pergunta: "9. O que √© WIP?", opcoes: ["Trabalho finalizado", "Trabalho em andamento", "Trabalho parado", "Trabalho cancelado"], resposta: "b", explicacao: "WIP (Work In Process) ou Trabalho em Andamento, refere-se a todo o invent√°rio que j√° entrou no processo produtivo mas ainda n√£o foi finalizado." },
        { tipo: "mcq", pergunta: "10. Qual √© o objetivo do projeto de processos?", opcoes: ["Apenas reduzir custos", "Atender ao cliente com qualidade, rapidez e baixo custo", "Aumentar a complexidade", "Diminuir a variedade de produtos"], resposta: "b", explicacao: "O objetivo do projeto de processos √© alinhar as opera√ß√µes para atender √†s necessidades do cliente de forma eficiente, balanceando qualidade, rapidez, confiabilidade, flexibilidade e custo." }
    ],
    vf: [
        { tipo: "vf", pergunta: "11. O arranjo f√≠sico n√£o afeta o fluxo de produ√ß√£o.", resposta: "F", explicacao: "Falso. O arranjo f√≠sico √© um dos fatores que mais impactam o fluxo, a efici√™ncia, o tempo de movimenta√ß√£o e a comunica√ß√£o dentro de uma opera√ß√£o." },
        { tipo: "vf", pergunta: "12. Takt Time √© calculado com base na demanda do cliente.", resposta: "V", explicacao: "Verdadeiro. A f√≥rmula do Takt Time √© (Tempo de Produ√ß√£o Dispon√≠vel) / (Demanda do Cliente), alinhando o ritmo da produ√ß√£o ao ritmo das vendas." },
        { tipo: "vf", pergunta: "13. Jobbing √© ideal para produ√ß√£o em grande escala.", resposta: "F", explicacao: "Falso. Jobbing (ou produ√ß√£o por tarefa) √© ideal para baixo volume e alta variedade, com produtos customizados, o oposto da produ√ß√£o em grande escala (massa)." },
        { tipo: "vf", pergunta: "14. SIPOC √© uma ferramenta de mapeamento.", resposta: "V", explicacao: "Verdadeiro. SIPOC √© uma ferramenta usada nas fases iniciais de projetos de melhoria para criar um mapa de alto n√≠vel do processo." },
        { tipo: "vf", pergunta: "15. Throughput Rate √© a mesma coisa que tempo de ciclo.", resposta: "F", explicacao: "Falso. Tempo de ciclo √© o tempo entre a finaliza√ß√£o de duas unidades consecutivas (ex: 2 minutos/pe√ßa). Throughput Rate (Taxa de Sa√≠da) √© o inverso (ex: 30 pe√ßas/hora)." },
        { tipo: "vf", pergunta: "16. WIP alto pode indicar gargalo.", resposta: "V", explicacao: "Verdadeiro. Um ac√∫mulo de trabalho em processo (WIP) antes de uma etapa geralmente significa que esta etapa √© mais lenta que as anteriores, caracterizando um gargalo." },
        { tipo: "vf", pergunta: "17. Servi√ßos profissionais s√£o altamente personalizados.", resposta: "V", explicacao: "Verdadeiro. Servi√ßos profissionais (m√©dicos, advogados, consultores) envolvem alto grau de customiza√ß√£o e conhecimento para atender necessidades espec√≠ficas do cliente." },
        { tipo: "vf", pergunta: "18. Produ√ß√£o em lote √© sempre cont√≠nua.", resposta: "F", explicacao: "Falso. Produ√ß√£o em lote √© intermitente por natureza (produz-se um lote, para, troca-se o setup, produz-se outro). Produ√ß√£o cont√≠nua opera 24/7 sem paradas, como em refinarias." },
        { tipo: "vf", pergunta: "19. Fluxograma mostra apenas o in√≠cio e fim do processo.", resposta: "F", explicacao: "Falso. Um fluxograma detalha todas as etapas do processo, incluindo opera√ß√µes, decis√µes, transportes, esperas e inspe√ß√µes, n√£o apenas o in√≠cio e o fim." },
        { tipo: "vf", pergunta: "20. Shouldice Hospital reduziu variabilidade para melhorar o atendimento.", resposta: "V", explicacao: "Verdadeiro. Ao se especializar apenas em cirurgias de h√©rnia, o Shouldice Hospital padronizou e otimizou seus processos, reduzindo a variabilidade e alcan√ßando resultados de alta qualidade e efici√™ncia." }
    ],
    associacao: [
        { 
            tipo: "match", 
            pergunta: "21-25. Ligue a coluna A (Tipo de Processo) com a coluna B (Exemplo).",
            colunaA: ["21. Projeto", "22. Jobbing", "23. Lote", "24. Massa", "25. Cont√≠nua"],
            colunaB: ["(a) F√°brica de refrigerantes", "(b) Restaurante de luxo", "(c) Consultoria de engenharia", "(d) Constru√ß√£o de um navio", "(e) Refinaria de petr√≥leo"],
            respostas: { "21": "d", "22": "b", "23": "a", "24": "c", "25": "e" },
            explicacao: "Projeto: item √∫nico (navio). Jobbing: alta customiza√ß√£o, baixo volume (restaurante). Lote: produ√ß√£o em bateladas (refrigerantes). Massa: alto volume, padronizado (consultoria pode ser, mas o exemplo de call center √© melhor). Cont√≠nua: fluxo ininterrupto (refinaria)."
        },
        { 
            tipo: "match", 
            pergunta: "26-30. Ligue a coluna A (Tipo de Servi√ßo/Arranjo) com a coluna B (Exemplo).",
            colunaA: ["26. Servi√ßo profissional", "27. Servi√ßo em massa", "28. Servi√ßo de loja", "29. Arranjo posicional", "30. Arranjo em linha"],
            colunaB: ["(f) Call center", "(g) Alfaiate sob medida", "(h) Hospital de h√©rnia Shouldice", "(i) Montadora de autom√≥veis", "(j) Supermercado"],
            respostas: { "26": "g", "27": "f", "28": "j", "29": "h", "30": "i" },
            explicacao: "Servi√ßo Profissional: alta customiza√ß√£o (alfaiate). Servi√ßo em Massa: padronizado (call center). Servi√ßo de Loja: mix de produtos e clientes (supermercado). Arranjo Posicional: produto fixo (cirurgia no Shouldice). Arranjo em Linha: sequ√™ncia fixa (montadora)."
        }
    ],
    calculos: [
        { tipo: "calc", pergunta: "31. Uma f√°brica produz 240 pe√ßas em 8 horas. Qual √© a taxa de atravessamento (throughput rate) em pe√ßas por hora?", resposta: "30", explicacao: "A taxa de atravessamento √© a produ√ß√£o total dividida pelo tempo. C√°lculo: 240 pe√ßas / 8 horas = 30 pe√ßas/hora.", hint: "Divida o n√∫mero total de pe√ßas pelo n√∫mero total de horas." },
        { tipo: "calc", pergunta: "32. Se o tempo de ciclo √© 2 minutos, quantas pe√ßas s√£o produzidas por hora?", resposta: "30", explicacao: "Uma hora tem 60 minutos. Se uma pe√ßa leva 2 minutos, em uma hora s√£o produzidas: 60 minutos / 2 minutos/pe√ßa = 30 pe√ßas.", hint: "Quantas vezes o 'tempo de ciclo' de 2 minutos cabe em 60 minutos (1 hora)?" },
        { tipo: "calc", pergunta: "33. Uma linha tem 30 pe√ßas em processo (WIP) e uma taxa de sa√≠da (throughput) de 10 pe√ßas/hora. Qual o Lead Time em horas? (Lei de Little)", resposta: "3", explicacao: "Pela Lei de Little, Lead Time = WIP / Taxa de Sa√≠da. C√°lculo: 30 pe√ßas / 10 pe√ßas/hora = 3 horas.", hint: "Lembre-se da Lei de Little: Invent√°rio (WIP) = Taxa de Sa√≠da √ó Lead Time. Isole o Lead Time." },
        { tipo: "calc", pergunta: "34. Se a demanda √© de 600 pe√ßas por dia (8h de trabalho = 480 min), qual deve ser o Takt Time em minutos por pe√ßa?", resposta: "0.8", explicacao: "Takt Time = Tempo Dispon√≠vel / Demanda. C√°lculo: 480 minutos / 600 pe√ßas = 0.8 minutos/pe√ßa (ou 48 segundos/pe√ßa).", hint: "A f√≥rmula √© o tempo total dispon√≠vel (em minutos) dividido pela demanda total." },
        { tipo: "calc", pergunta: "35. Um processo tem 4 est√°gios com tempos: 5 min, 3 min, 4 min, 5 min. Qual √© o tempo do gargalo em minutos?", resposta: "5", explicacao: "O gargalo √© a etapa mais lenta do processo, que limita a capacidade total. Neste caso, as duas etapas de 5 minutos s√£o o gargalo.", hint: "O gargalo √© simplesmente a etapa que leva mais tempo para ser conclu√≠da." },
        { tipo: "calc", pergunta: "36. No exemplo acima (5, 3, 4, 5 min), qual √© o tempo de ciclo do processo em minutos?", resposta: "5", explicacao: "O tempo de ciclo de um processo sequencial √© determinado pelo seu gargalo. Portanto, o tempo de ciclo √© de 5 minutos.", hint: "O tempo de ciclo de um processo inteiro √© sempre igual ao tempo do seu gargalo (a etapa mais lenta)." },
        { tipo: "calc", pergunta: "37. Uma empresa tem 1.200 pedidos por semana (40h de trabalho). Qual o tempo de ciclo necess√°rio em minutos por pedido?", resposta: "2", explicacao: "Tempo dispon√≠vel = 40 horas * 60 min/h = 2400 minutos. Tempo de ciclo = Tempo / Pedidos. C√°lculo: 2400 min / 1200 pedidos = 2 minutos/pedido.", hint: "Primeiro, converta as 40 horas de trabalho em minutos. Depois, divida esse total pelo n√∫mero de pedidos." },
        { tipo: "calc", pergunta: "38. Se cada oper√°rio leva 15 minutos para processar um pedido e o tempo de ciclo alvo √© de 3 minutos, quantos oper√°rios s√£o necess√°rios?", resposta: "5", explicacao: "N√∫mero de oper√°rios = Tempo total da tarefa / Takt Time (ou tempo de ciclo alvo). C√°lculo: 15 minutos / 3 minutos = 5 oper√°rios.", hint: "Divida o tempo que um √∫nico oper√°rio leva pela cad√™ncia que a linha precisa ter (o tempo de ciclo alvo)." },
        { tipo: "calc", pergunta: "39. Um hospital tem 50 pacientes em espera (WIP) e o tempo de atendimento √© de 12 minutos (Tempo de Ciclo). Qual o Lead Time em minutos?", resposta: "600", explicacao: "Pela Lei de Little: Lead Time = WIP * Tempo de Ciclo. C√°lculo: 50 pacientes * 12 minutos/paciente = 600 minutos (ou 10 horas).", hint: "Use uma varia√ß√£o da Lei de Little: Lead Time = Itens no sistema (WIP) √ó Tempo de Ciclo." },
        { tipo: "calc", pergunta: "40. Reduzindo o Takt Time de 4 para 2 minutos, o que acontece com a capacidade de produ√ß√£o? (Digite 'dobra', 'cai pela metade' ou 'n√£o muda')", resposta: "dobra", explicacao: "Reduzir o Takt Time pela metade significa que voc√™ precisa produzir no dobro da velocidade para atender a uma demanda maior. Portanto, a produ√ß√£o dobra.", hint: "Se o tempo para fazer uma pe√ßa cai pela metade, o que acontece com a quantidade que voc√™ pode fazer na mesma hora?" }
    ],
    graficos: [
        { tipo: "mcq", pergunta: "41. Em um fluxograma com 8 opera√ß√µes, 4 transportes e 2 atrasos, qual √© a atividade que mais representa 'n√£o agrega√ß√£o de valor'?", opcoes: ["Opera√ß√µes", "Transportes e atrasos", "Apenas opera√ß√µes", "Nenhuma"], resposta: "b", explicacao: "Transportes e atrasos (esperas) s√£o exemplos cl√°ssicos de atividades que n√£o agregam valor ao produto final sob a perspectiva do cliente." },
        { tipo: "mcq", pergunta: "42. Em um diagrama SIPOC, o que representa a letra 'C'?", opcoes: ["Custo", "Capacidade", "Cliente (Customer)", "Ciclo"], resposta: "c", explicacao: "'C' em SIPOC significa Customer (Cliente), que √© quem recebe a sa√≠da (Output) do processo." },
        { tipo: "mcq", pergunta: "43. Em um Turtle Diagram (Diagrama Tartaruga), o que est√° no centro (no casco da tartaruga)?", opcoes: ["Entradas e Sa√≠das", "O Processo", "Recursos", "M√©tricas"], resposta: "b", explicacao: "O centro do Diagrama Tartaruga representa o Processo em si, com suas etapas principais. As 'patas' e a 'cabe√ßa/rabo' representam os outros elementos (inputs, outputs, recursos, etc)." },
        { tipo: "mcq", pergunta: "44. Em um mapa de fluxo de valor (VSM), o que uma seta pontilhada geralmente indica?", opcoes: ["Fluxo de material", "Fluxo de informa√ß√£o", "Movimento do operador", "Dire√ß√£o da produ√ß√£o"], resposta: "b", explicacao: "No VSM, setas cont√≠nuas normalmente mostram o fluxo de materiais, enquanto setas pontilhadas indicam o fluxo de informa√ß√µes (pedidos, programa√ß√µes, etc.)." },
        { tipo: "mcq", pergunta: "45. Em um gr√°fico de utiliza√ß√£o vs. tempo de espera, o que acontece com o tempo de espera quando a utiliza√ß√£o se aproxima de 100%?", opcoes: ["Diminui", "N√£o se altera", "Aumenta exponencialmente", "Torna-se zero"], resposta: "c", explicacao: "Pela Teoria das Filas, √† medida que a utiliza√ß√£o de um recurso se aproxima de 100%, a variabilidade do sistema faz com que as filas (e o tempo de espera) cres√ßam exponencialmente." },
        { tipo: "mcq", pergunta: "46. Em um diagrama de preced√™ncia, o que as setas indicam?", opcoes: ["O custo da atividade", "A ordem em que as atividades devem ser feitas", "Quem √© o respons√°vel", "O tempo da atividade"], resposta: "b", explicacao: "As setas em um diagrama de preced√™ncia mostram as depend√™ncias e a sequ√™ncia l√≥gica entre as tarefas de um projeto ou processo." },
        { tipo: "mcq", pergunta: "47. Em um layout funcional (por processo), como os recursos s√£o agrupados?", opcoes: ["Por produto", "Por tipo de fun√ß√£o ou equipamento", "Em uma linha reta", "De forma aleat√≥ria"], resposta: "b", explicacao: "No layout funcional, m√°quinas e habilidades similares s√£o agrupadas em departamentos (ex: setor de solda, setor de pintura), oferecendo alta flexibilidade." },
        { tipo: "mcq", pergunta: "48. Em um layout celular, o que √© uma 'c√©lula'?", opcoes: ["Uma sala de descanso", "Um grupo de m√°quinas e pessoas dedicadas a uma fam√≠lia de produtos", "Um √∫nico equipamento grande", "O escrit√≥rio do gerente"], resposta: "b", explicacao: "Uma c√©lula de manufatura agrupa diferentes tipos de m√°quinas e operadores para produzir uma fam√≠lia de pe√ßas com requisitos de processamento semelhantes, combinando a efici√™ncia da linha com a flexibilidade do layout funcional." },
        { tipo: "mcq", pergunta: "49. Em um layout em linha, o que define a sequ√™ncia de trabalho?", opcoes: ["A prefer√™ncia do operador", "A sequ√™ncia de montagem do produto", "A disponibilidade de m√°quinas", "O custo dos materiais"], resposta: "b", explicacao: "O layout em linha √© organizado estritamente de acordo com os passos sequenciais necess√°rios para fabricar o produto." },
        { tipo: "mcq", pergunta: "50. Em um layout posicional (fixo), o que permanece fixo?", opcoes: ["Os trabalhadores", "As ferramentas", "O produto ou cliente sendo trabalhado", "O gerente"], resposta: "c", explicacao: "No layout posicional, o produto (ex: avi√£o, navio) ou cliente (ex: paciente em cirurgia) fica em um local fixo, e todos os recursos necess√°rios se movem at√© ele." }
    ],
    abertas: [
        { tipo: "open", pergunta: "51. Explique com suas palavras o que √© Takt Time e por que √© importante.", resposta: ["ritmo", "demanda", "cliente", "sincronizar", "cad√™ncia"], explicacao: "Takt Time √© o ritmo (ou cad√™ncia) que a produ√ß√£o precisa seguir para atender exatamente a demanda do cliente. √â crucial porque sincroniza a f√°brica com o mercado, evitando superprodu√ß√£o e falta de estoque.", hint: "Sua resposta deve conectar as palavras 'ritmo', 'produ√ß√£o' e 'demanda do cliente'." },
        { tipo: "open", pergunta: "52. Por que o Shouldice Hospital √© um exemplo de redu√ß√£o de variabilidade?", resposta: ["especializou", "h√©rnia", "padronizou", "foco", "repeti√ß√£o"], explicacao: "O Shouldice Hospital reduziu drasticamente a variabilidade ao se especializar em um √∫nico procedimento (reparo de h√©rnia). Esse foco permitiu padronizar t√©cnicas, treinar equipes e otimizar cada etapa, resultando em alta efici√™ncia e qualidade previs√≠vel.", hint: "O segredo deles foi o 'foco'. O que acontece quando voc√™ faz a mesma coisa repetidamente e se especializa nisso?" },
        { tipo: "open", pergunta: "53. Diferencie tempo de ciclo de lead time.", resposta: ["ciclo", "frequ√™ncia", "unidade", "lead", "total", "jornada", "espera"], explicacao: "Tempo de Ciclo √© a frequ√™ncia com que uma unidade √© finalizada (ex: 1 pe√ßa a cada 2 minutos). Lead Time √© o tempo total da jornada do produto, desde o pedido at√© a entrega, incluindo todo o tempo de processamento e, crucialmente, os tempos de espera.", hint: "Um mede a 'frequ√™ncia' de sa√≠da de um produto, o outro mede a 'jornada completa', incluindo as esperas." },
        { tipo: "open", pergunta: "54. Por que o mapeamento de processos ajuda a encontrar gargalos?", resposta: ["visualizar", "fluxo", "etapas", "lenta", "ac√∫mulo", "wip"], explicacao: "O mapeamento torna o fluxo de trabalho vis√≠vel. Ao analisar o mapa, √© poss√≠vel identificar etapas onde o trabalho se acumula (alto WIP) ou cujo tempo de processamento √© significativamente maior que os outros. Esses pontos s√£o os gargalos que limitam a capacidade de todo o sistema.", hint: "Pense em como um mapa de tr√¢nsito te ajuda a 'ver' o congestionamento. Onde o 'trabalho' (WIP) se acumula no fluxo?" },
        { tipo: "open", pergunta: "55. Explique como o arranjo f√≠sico afeta a efici√™ncia de um hospital.", resposta: ["dist√¢ncia", "fluxo", "paciente", "equipamento", "comunica√ß√£o", "tempo"], explicacao: "Um bom arranjo f√≠sico em um hospital minimiza a dist√¢ncia que pacientes e funcion√°rios precisam percorrer, otimiza o fluxo de exames e procedimentos, posiciona equipamentos de emerg√™ncia em locais estrat√©gicos e melhora a comunica√ß√£o entre equipes, reduzindo tempos de espera e aumentando a seguran√ßa.", hint: "Pense em 'dist√¢ncias'. Como a proximidade entre a sala de emerg√™ncia e a radiologia afeta o tempo de atendimento?" },
        { tipo: "open", pergunta: "56. D√™ um exemplo de servi√ßo profissional e servi√ßo em massa.", resposta: ["profissional", "advogado", "consultor", "m√©dico", "arquiteto", "massa", "call center", "fast food", "banco"], explicacao: "Servi√ßo Profissional: consultoria jur√≠dica, onde h√° alta customiza√ß√£o e intera√ß√£o. Servi√ßo em Massa: um call center de um banco, que lida com alto volume de solicita√ß√µes padronizadas e baixo tempo de contato.", hint: "Pense em 'customiza√ß√£o vs. padroniza√ß√£o'. Um √© altamente personalizado e o outro √© de alto volume e repetitivo." },
        { tipo: "open", pergunta: "57. Como o volume e a variedade afetam o tipo de processo escolhido?", resposta: ["volume", "variedade", "matriz", "projeto", "jobbing", "lote", "massa"], explicacao: "A rela√ß√£o volume-variedade √© fundamental (Matriz Produto-Processo). Baixo volume e alta variedade levam a processos flex√≠veis como Projeto ou Jobbing. Alto volume e baixa variedade favorecem processos eficientes como Massa ou Cont√≠nuo. Processos em Lote ficam no meio termo.", hint: "Lembre-se da matriz produto-processo. O que acontece nos extremos (canto superior esquerdo vs. canto inferior direito da matriz)?" },
        { tipo: "open", pergunta: "58. Explique por que a padroniza√ß√£o de processos √© importante na sa√∫de.", resposta: ["seguran√ßa", "erro", "qualidade", "previsibilidade", "efici√™ncia", "treinamento"], explicacao: "A padroniza√ß√£o na sa√∫de (ex: checklists de cirurgia) √© vital para reduzir erros m√©dicos, garantir um n√≠vel consistente de qualidade no atendimento, aumentar a seguran√ßa do paciente, facilitar o treinamento de novos profissionais e melhorar a efici√™ncia geral.", hint: "A palavra-chave √© 'redu√ß√£o de erros'. Como a padroniza√ß√£o ajuda a garantir a 'seguran√ßa' do paciente?" },
        { tipo: "open", pergunta: "59. Como o Changi Airport usa tecnologia para melhorar o fluxo de passageiros?", resposta: ["automa√ß√£o", "biometria", "reconhecimento facial", "check-in", "autoatendimento", "bagagem"], explicacao: "O Aeroporto de Changi utiliza automa√ß√£o extensiva, com quiosques de check-in e despacho de bagagem de autoatendimento, al√©m de biometria e reconhecimento facial para o controle de passaporte, tornando o fluxo de passageiros mais r√°pido, fluido e com menos filas.", hint: "Concentre-se em como o passageiro interage com o aeroporto sem precisar de funcion√°rios. Pense em 'autoatendimento' e 'biometria'." },
        { tipo: "open", pergunta: "60. Qual √© a rela√ß√£o entre flexibilidade e custo na matriz produto-processo?", resposta: ["flexibilidade", "custo", "inversamente", "trade-off", "projeto", "cont√≠nuo"], explicacao: "Geralmente, h√° um trade-off: processos muito flex√≠veis (como Projeto), capazes de lidar com alta variedade, tendem a ter um custo unit√°rio mais alto. Processos muito eficientes e de baixo custo (como Cont√≠nuo) s√£o r√≠gidos e possuem baixa flexibilidade. A rela√ß√£o √©, na maioria das vezes, inversamente proporcional.", hint: "√â uma rela√ß√£o de 'trade-off'. Para ganhar mais em um (flexibilidade), voc√™ geralmente perde no outro (custo). Eles s√£o proporcionais ou inversos?" }
    ]
};

let activeQuestions = [];
let currentIndex = 0;
let score = 0;
let userAnswers = [];

function startQuiz(category) {
    document.getElementById("menu").style.display = "none";
    document.getElementById("quiz").style.display = "block";
    document.getElementById("result").style.display = "none";

    if (category === "aleatorio") {
        const all = [].concat(...Object.values(allQuestions));
        activeQuestions = all.sort(() => 0.5 - Math.random()).slice(0, 10);
    } else {
        activeQuestions = [...allQuestions[category]];
    }

    currentIndex = 0;
    score = 0;
    userAnswers = [];
    displayQuestion();
}

function displayQuestion() {
    if (currentIndex < activeQuestions.length) {
        const q = activeQuestions[currentIndex];
        document.getElementById("question").innerText = q.pergunta;
        const body = document.getElementById("question-body");
        const nav = document.getElementById("nav-buttons");
        
        body.innerHTML = "";
        nav.innerHTML = "";
        document.getElementById("feedback").innerText = "";
        document.getElementById("explanation").innerText = "";

        switch (q.tipo) {
            case "mcq":
            case "vf":
                renderMCQ(q, body);
                break;
            case "match":
                renderMatch(q, body, nav);
                break;
            case "calc":
            case "open":
                renderOpen(q, body, nav);
                break;
        }
    } else {
        showResult();
    }
}

function renderMCQ(q, container) {
    let optionsHTML = "";
    const options = q.tipo === 'vf' ? ["Verdadeiro", "Falso"] : q.opcoes;
    options.forEach((op, i) => {
        const value = q.tipo === 'vf' ? (i === 0 ? 'V' : 'F') : String.fromCharCode(97 + i);
        optionsHTML += `<div class="option" onclick="checkMCQAnswer('${value}', this)">${q.tipo === 'mcq' ? value + ') ' : ''}${op}</div>`;
    });
    container.innerHTML = optionsHTML;
}

function renderMatch(q, container, navContainer) {
    let html = `<div class="match-options"><strong>Op√ß√µes:</strong><br>${q.colunaB.join(" | ")}</div>`;
    html += '<div class="match-container">';
    q.colunaA.forEach((item, index) => {
        const key = Object.keys(q.respostas)[index];
        html += `<div>${item}</div> <div>( <input type="text" id="match-input-${key}" maxlength="1" /> )</div>`;
    });
    html += '</div>';
    container.innerHTML = html;
    navContainer.innerHTML = `<button class="btn" onclick="checkMatchAnswer()">Verificar Resposta</button>`;
}

function renderOpen(q, container, navContainer) {
    if (q.tipo === 'open') {
        container.innerHTML = `<textarea id="open-input" class="textarea-field" placeholder="Digite sua resposta aqui..."></textarea>`;
    } else {
        container.innerHTML = `<input type="text" id="open-input" class="input-field" placeholder="Digite sua resposta aqui...">`;
    }
    navContainer.innerHTML = `<button class="btn" onclick="checkOpenAnswer()">Verificar Resposta</button>`;
}

function checkMCQAnswer(answer, element) {
    const q = activeQuestions[currentIndex];
    const isCorrect = answer.toLowerCase() === q.resposta.toLowerCase();
    
    document.querySelectorAll(".option").forEach(opt => opt.style.pointerEvents = "none");

    if (isCorrect) {
        element.classList.add("correct");
        document.getElementById("feedback").innerText = "‚úÖ Correto!";
        score++;
    } else {
        element.classList.add("wrong");
        document.getElementById("feedback").innerText = `‚ùå Errado!`;
        document.querySelectorAll(".option").forEach(opt => {
            const optText = q.tipo === 'vf' ? (opt.innerText.startsWith("Verdadeiro") ? 'V' : 'F') : opt.innerText.substring(0, 1);
            if (optText.toLowerCase() === q.resposta.toLowerCase()) {
                opt.classList.add("correct");
            }
        });
    }

    userAnswers.push({ question: q.pergunta, userAnswer: answer, correctAnswer: q.explicacao, isCorrect: isCorrect });
    showExplanationAndProceed();
}

function checkMatchAnswer() {
    const q = activeQuestions[currentIndex];
    let allCorrect = true;
    let givenAnswers = {};

    Object.keys(q.respostas).forEach(key => {
        const input = document.getElementById(`match-input-${key}`);
        const userAnswer = input.value.toLowerCase();
        givenAnswers[key] = userAnswer;
        if (userAnswer !== q.respostas[key]) {
            allCorrect = false;
            input.classList.add("wrong");
        } else {
            input.classList.add("correct");
        }
        input.disabled = true;
    });

    document.getElementById("feedback").innerText = allCorrect ? "‚úÖ Correto!" : "‚ùå Resposta(s) incorreta(s)!";
    if (allCorrect) score++;
    
    userAnswers.push({ question: q.pergunta, userAnswer: JSON.stringify(givenAnswers), correctAnswer: q.explicacao, isCorrect: allCorrect });
    showExplanationAndProceed();
}

function checkOpenAnswer() {
    const q = activeQuestions[currentIndex];
    const input = document.getElementById("open-input");
    const userAnswer = input.value.trim().toLowerCase();
    let isCorrect = false;

    if (q.tipo === 'calc') {
        const userNum = userAnswer.replace(",", ".");
        isCorrect = userNum === q.resposta.toLowerCase();
    } else { // 'open'
        let keywordsFound = 0;
        q.resposta.forEach(keyword => {
            if (userAnswer.includes(keyword)) {
                keywordsFound++;
            }
        });
        isCorrect = keywordsFound >= (q.resposta.length * 0.6);
    }
    
    if (isCorrect) {
        input.disabled = true;
        input.classList.remove("wrong");
        input.classList.add("correct");
        document.getElementById("feedback").innerHTML = "‚úÖ <strong>Correto!</strong>";
        
        const alreadyAnswered = userAnswers.some(ans => ans.question === q.pergunta);
        if (!alreadyAnswered) {
            score++;
            userAnswers.push({ question: q.pergunta, userAnswer: input.value, correctAnswer: q.explicacao, isCorrect: true });
        }
        
        showExplanationAndProceed();

    } else {
        document.getElementById("feedback").innerHTML = `‚ùå Quase l√°! <br><strong>Dica:</strong> ${q.hint}`;
        input.classList.add("wrong");
        
        setTimeout(() => {
            input.classList.remove("wrong");
        }, 600);
    }
}

function showExplanationAndProceed() {
    const q = activeQuestions[currentIndex];
    document.getElementById("explanation").innerText = `Explica√ß√£o: ${q.explicacao}`;
    const nav = document.getElementById("nav-buttons");
    const checkButton = nav.querySelector('button');
    if(checkButton) checkButton.style.display = 'none';

    nav.innerHTML = `<button class="btn" onclick="nextQuestion()">Pr√≥xima Pergunta</button>`;
}

function nextQuestion() {
    currentIndex++;
    displayQuestion();
}

function showResult() {
    document.getElementById("quiz").style.display = "none";
    document.getElementById("result").style.display = "block";
    
    const total = activeQuestions.length;
    let finalMessage = "";
    const percentage = (score / total);

    if (percentage >= 0.8) {
        finalMessage = "üèÜ Uau, voc√™ √© um especialista! Parab√©ns!";
    } else if (percentage >= 0.5) {
        finalMessage = "üéâ Bom trabalho! Voc√™ est√° no caminho certo!";
    } else {
        finalMessage = "üôÇ N√£o desanime! Continue estudando e tente novamente!";
    }

    document.getElementById("final-message").innerText = finalMessage;
    document.getElementById("score").innerText = `Voc√™ acertou ${score} de ${total} perguntas.`;
    
    let gabaritoHTML = "<h3>Gabarito Detalhado</h3>";
    activeQuestions.forEach((q, i) => {
        const userAnswerData = userAnswers.find(ans => ans.question === q.pergunta) || { userAnswer: "[N√£o respondida ou pulada]", isCorrect: false };
        const status = userAnswerData.isCorrect ? "‚úÖ" : "‚ùå";
        gabaritoHTML += `<p style="padding-bottom: 10px; border-bottom: 1px solid #333;"><strong>${q.pergunta}</strong><br>
        <span style="color: ${userAnswerData.isCorrect ? '#28a745' : '#dc3545'};">Sua resposta: ${userAnswerData.userAnswer} ${status}</span><br>
        <i><strong>Justificativa:</strong> ${q.explicacao}</i></p>`;
    });
    document.getElementById("gabarito").innerHTML = gabaritoHTML;
}

function voltarInicio() {
    document.getElementById("result").style.display = "none";
    document.getElementById("menu").style.display = "block";
}

function baixarRelatorio() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();
    const pageWidth = doc.internal.pageSize.getWidth();
    let y = 20;

    doc.setFontSize(20);
    doc.text("Relat√≥rio - Quiz de Gest√£o de Processos", pageWidth / 2, y, { align: 'center' });
    y += 15;
    
    doc.setFontSize(16);
    doc.text(`Pontua√ß√£o: ${score} de ${activeQuestions.length}`, pageWidth / 2, y, { align: 'center' });
    y += 20;
    
    doc.setFontSize(12);
    
    userAnswers.forEach((answer, i) => {
        const q = activeQuestions.find(q => q.pergunta === answer.question);
        const status = answer.isCorrect ? "Correta" : "Incorreta";
        let textBlock = `Pergunta ${i + 1}: ${q.pergunta}\n`;
        textBlock += `Sua resposta: ${answer.userAnswer} (${status})\n`;
        textBlock += `Justificativa/Resposta esperada: ${q.explicacao}\n\n`;

        const lines = doc.splitTextToSize(textBlock, 180);
        if (y + (lines.length * 5) > 280) {
            doc.addPage();
            y = 20;
        }
        doc.text(lines, 10, y);
        y += lines.length * 5 + 5;
    });

    doc.save("relatorio_quiz.pdf");
}
</script>

</body>
</html>